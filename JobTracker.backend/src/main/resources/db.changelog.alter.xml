<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">


	<changeSet id="20160509-CREATEPseudoJob" author="phil">
		<sql>
			<![CDATA[
				CREATE TABLE `PSEUDO_JOB`
				(
					`ID` INT NOT NULL AUTO_INCREMENT,
					`NAME` VARCHAR(30),
					`CUSTOMER` VARCHAR(30),
					PRIMARY KEY (`ID`)
				)
				ENGINE = InnoDB
				;
			]]>
		</sql>
	</changeSet>
	<changeSet id="20160509-CREATECustomer" author="phil">
		<sql>
			<![CDATA[
				CREATE TABLE `CUSTOMER`
				(
					`ID` INT NOT NULL AUTO_INCREMENT,
					`NAME` VARCHAR(30),
					PRIMARY KEY (`ID`)
				)
				ENGINE = InnoDB
				;
			]]>
		</sql>
	</changeSet>
	<changeSet id="20160509-ALTERJob" author="phil">
		<sql>
			<![CDATA[
				CREATE TABLE `JOB`
				(
					`JOB_NO` INT NOT NULL AUTO_INCREMENT,
					`POS_NO` INT NOT NULL,
					`DESCRIPTION` VARCHAR(30) NOT NULL,
					`CUSTOMER_ID` INT,
					`BUDGET` DECIMAL(13,4),
					`BUDGET_USED` DECIMAL(13,4),
					`ACCOUNTING_MODE` INT,
					`IS_INTERN` BOOLEAN,
					PRIMARY KEY (`JOB_NO`,`POS_NO`,`DESCRIPTION`),
					FOREIGN KEY (`CUSTOMER_ID`) REFERENCES customer(`ID`)
				)
				ENGINE = InnoDB
				;
			]]>
		</sql>
	</changeSet>
	<changeSet id="20160509-CREATEUser-DROPEmployee" author="phil">
		<sql>
			<![CDATA[
				CREATE TABLE `USER`
				(
					`ID` INT NOT NULL AUTO_INCREMENT,
					`NAME` VARCHAR(30),
					`SURNAME` VARCHAR(30),
					`SUPERVISOR` INT,
					PRIMARY KEY (`ID`),
					FOREIGN KEY (`SUPERVISOR`) REFERENCES user(`ID`)
				)
				ENGINE = InnoDB
				;
			]]>
		</sql>
	</changeSet>
	<changeSet id="20160509-CREATEJob_Task" author="phil">
		<sql>
			<![CDATA[
				CREATE TABLE `JOB_TASK`
				(
					`ID` INT NOT NULL AUTO_INCREMENT,
					`JOB_ID` INT NOT NULL,
					`NAME` VARCHAR(30),
					PRIMARY KEY (`ID`,`JOB_ID`),
					FOREIGN KEY (`JOB_ID`) REFERENCES job(`JOB_NO`)
				)
				ENGINE = InnoDB
				;
			]]>
		</sql>
	</changeSet>
	<changeSet id="20160509-CREATEUserJob" author="phil">
		<sql>
			<![CDATA[
				CREATE TABLE `USER_JOB`
				(
					`USER_ID` INT NOT NULL AUTO_INCREMENT,
					`JOB_ID` INT,
					`ROLE` INT,
					PRIMARY KEY (`USER_ID`,`JOB_ID`),
					FOREIGN KEY (`USER_ID`) REFERENCES user(`ID`),
					FOREIGN KEY (`JOB_ID`) REFERENCES job(`JOB_NO`)
				)
				ENGINE = InnoDB
				;
			]]>
		</sql>
	</changeSet>
	<changeSet id="20160509-CREATEActivityReportTemplate" author="phil">
		<sql>
			<![CDATA[
				CREATE TABLE `ACTIVITY_REPORT_TEMPLATE`
				(
					`ID` INT NOT NULL AUTO_INCREMENT,
					`AUTHOR` INT NOT NULL,
					`TEXT` VARCHAR(30),
					`TASK_ID` INT,
					PRIMARY KEY (`ID`,`AUTHOR`),
					FOREIGN KEY (`TASK_ID`) REFERENCES job_task(`ID`)
				)
				ENGINE = InnoDB
				;
			]]>
		</sql>
	</changeSet>
	<changeSet id="20160509-CREATEUtilizationWeek" author="phil">
		<sql>
			<![CDATA[
				CREATE TABLE `UTILIZATION_WEEK`
				(
					`ID` INT NOT NULL AUTO_INCREMENT,
					`AUTHOR` INT NOT NULL,
					`BEGIN` DATE,
					`DAYS_FREE` INT,
					`DAYS_WORK` INT,
					`DAYS_HOLIDAY` INT,
					`POSSIBILITY` DECIMAL(3,2),
					`PSEUDO_JOB_ID` INT,
					PRIMARY KEY (`ID`,`AUTHOR`),
					FOREIGN KEY (`AUTHOR`) REFERENCES user(`ID`)
				)
				ENGINE = InnoDB
				;
			]]>
		</sql>
	</changeSet>
	<changeSet id="20160509-ALTERActivityReport" author="phil">
		<sql>
			<![CDATA[
				CREATE TABLE `ACTIVITY_REPORT`
				(
					`ID` INT NOT NULL AUTO_INCREMENT,
					`AUTHOR` INT NOT NULL,
					`TEXT` VARCHAR(30),
					`BEGIN_DATE` DATE,
					`BEGIN_TIME` TIME,
					`END_DATE` DATE,
					`END_TIME` TIME,
					`TASK_ID` INT,
					`JOB_ID` INT,
					PRIMARY KEY (`ID`,`AUTHOR`),
					FOREIGN KEY (`TASK_ID`) REFERENCES job_task(`ID`),
					FOREIGN KEY (`JOB_ID`) REFERENCES job(`JOB_NO`)
				)
				ENGINE = InnoDB
				;
			]]>
		</sql>
	</changeSet>
</databaseChangeLog>